extends ../sidebar

block authenticatedcontent
  if message
    div.alert.alert-success(role="alert")
      p= message
  .container-fluid.mt-5.col-md-10
    h1 Os meus grupos
    h5.text-muted Aqui podes criar e gerir grupos que tenhas criado. Podes também aceitar ou rejeitar convites para outros grupos, e sair de grupos que tenhas seguido.
    br
    a.btn.btn-success.mb-3(href="/groups/new" role="button") Criar Novo Grupo
    .container.mt-5
      h4 Convites para grupos
      .card-deck.mt-2
        each group in invites
          .card(style='max-width: 17rem;')
            .card-body
              div(style="transform: rotate(0);")
                h5.card-title @#{group.at}
                if group.public == false
                  p.text-info(style="margin-bottom: 10px; font-size: 12px") Grupo privado
                if group.membercount == 1
                  h6.card-subtitle.mb-2.text-muted #{group.membercount} membro
                else
                  h6.card-subtitle.mb-2.text-muted #{group.membercount} membros
                p.card-text
                  | #{group.name}
                a(href=`/groups/${group.at}` class="stretched-link")
              hr
              .mt-4.mb-0
                a.card-link.text-danger(href=`/groups/${group.at}/reject`) Rejeitar
                a.card-link.text-success(href=`/groups/${group.at}/follow`) Aceitar
      hr
      h4 Grupos que criaste
      .card-deck.mt-2
        each group in created
            .card(style='max-width: 17rem;')
              .card-body
                div(style="transform: rotate(0);")
                  h5.card-title @#{group.at}
                    if group.membercount == 1
                      h6.card-subtitle.mb-2.text-muted #{group.membercount} membro
                    else
                      h6.card-subtitle.mb-2.text-muted #{group.membercount} membros
                  if group.public == false
                    p.text-info Grupo privado
                  p.card-text
                    | #{group.name}
                  a(href=`/groups/${group.at}` class="stretched-link")
                  hr
                form.input-group.mb-3(action=`/groups/${group.at}/invite/` method="POST")
                  .input-group-prepend
                      span#basic-addon1.input-group-text @
                  input.form-control(type='text' name="invitedat" placeholder="utilizador" aria-label="@ do utilizador" aria-describedby='basic-addon2')
                  .input-group-append
                    button.btn.btn-outline-secondary(type='submit') +
                //a.card-link(href='#') Card link
                //a.card-link(href='#') Another link
      hr
      h4 Grupos que estás a seguir
      .card-deck.mt-2.mb-5
        each group in following
          .card(style='max-width: 17rem;')
            .card-body
              div(style="transform: rotate(0);")
                h5.card-title @#{group.at}
                if group.public == false
                  p.text-info(style="margin-bottom: 10px; font-size: 12px") Grupo privado
                if group.membercount == 1
                  h6.card-subtitle.mb-2.text-muted #{group.membercount} membro
                else
                  h6.card-subtitle.mb-2.text-muted #{group.membercount} membros
                p.card-text
                  | #{group.name} 
                a(href=`/groups/${group.at}` class="stretched-link")
              hr
              .mt-4.mb-0
                a.card-link.text-danger(href=`/groups/${group.at}/unfollow`) Deixar de Seguir
